<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CW Czar Pricing – Rate a Shipment</title>

  <!-- Main theme -->
  <link rel="stylesheet" href="./styles.css?v=16" />

  <!-- Small layout helper for the 2-column grid -->
  <style>
    .two-col {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr; /* left inputs / right results */
      gap: 24px;
      align-items: start;
    }
    @media (max-width: 900px){
      .two-col { grid-template-columns: 1fr; }
    }
    .results-card h3 { margin-top: 0; }
  </style>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <!-- Top bar -->
  <header class="topbar">
    <div class="brand">
      <span class="brand-text">CW Czar Pricing</span>
    </div>
    <nav class="topnav">
      <a class="active" href="index.html">Rate a Shipment</a>
      <a href="manage.html">Manage Settings</a>
      <a href="usage.html">Usage Report</a>
      <a href="accessorials.html">Accessorials</a>
    </nav>
    <div class="top-actions">
      <span id="userBadge" class="muted"></span>
      <button id="logoutBtn" class="btn-subtle-sm">Logout</button>
    </div>
  </header>

  <main class="container">
    <div class="two-col">
      <!-- LEFT: Inputs -->
      <section class="card">
        <h2>Rate a Shipment</h2>

        <div class="row"><label>Origin ZIP</label><input id="originZip" type="text" placeholder="e.g., 30303" /></div>
        <div class="row"><label>Destination ZIP</label><input id="destZip" type="text" placeholder="e.g., 60606" /></div>
        <div class="row"><label>Class</label><input id="class" type="text" placeholder="e.g., 70" /></div>
        <div class="row"><label>Weight (lb)</label><input id="weight" type="text" placeholder="e.g., 500" /></div>
        <div class="row"><label>Miles</label><input id="miles" type="text" placeholder="optional" /></div>
        <div class="row"><label>Fuel Surcharge (%)</label><input id="fscPct" type="text" placeholder="e.g., 25" /></div>
        <div class="row"><label>MC Floor ($)</label><input id="mcFloor" type="text" placeholder="optional" /></div>

        <div class="row"><label>Accessorials ($)</label><input id="accessorials" type="text" placeholder="0.00" /></div>

        <div class="row">
          <label>Select Saved Accessorial</label>
          <div style="display:flex;gap:8px;width:100%;">
            <select id="savedAccessorial" style="flex:1;border:1px solid #e5e7eb;border-radius:10px;padding:6px 10px;"></select>
            <button id="addAccessorialBtn" type="button" class="btn-subtle">Add</button>
          </div>
        </div>

        <div id="chosenAccessorials" class="help" style="margin-top:6px;"></div>

        <div class="row"><label>Discount (%)</label><input id="discountPct" type="text" placeholder="e.g., 70" /></div>

        <div class="actions">
          <button id="rateBtn" class="btn-primary">Rate Shipment</button>
          <button id="clearBtn" class="btn-subtle" type="button">Clear</button>
        </div>
      </section>

      <!-- RIGHT: Results -->
      <section class="card results-card">
        <h3>Results</h3>
        <ul class="totals">
          <li><span>Gross</span><span id="tGross">—</span></li>
          <li><span>Discount</span><span id="tDisc">—</span></li>
          <li><span>MC Floor</span><span id="tFloor">—</span></li>
          <li><span>Fuel Surcharge</span><span id="tFsc">—</span></li>
          <li><span>Accessorials</span><span id="tAcc">—</span></li>
          <li><strong>Net</strong><strong id="tNet">—</strong></li>
        </ul>
      </section>
    </div>
  </main>

  <footer class="bottombar">
    <p class="smc">© 2025 CW Czar Pricing. All Rights Reserved.</p>
  </footer>

  <!-- Auth gate -->
  <script type="module">
    import { requireAuth, applyUserToUI } from "./auth.js?v=3";
    requireAuth();
    applyUserToUI();
  </script>

  <!-- App logic (saved accessorials + rating math) -->
  <script src="./app.js?v=3"></script>
</body>
</html>
